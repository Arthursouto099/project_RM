// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model CommonUser {
  id_user           String    @id @default(uuid())
  username          String
  email             String    @unique
  password          String
  birth             DateTime?
  created_at        DateTime  @default(now())
  updated_at        DateTime  @updatedAt
  profile_image     String?
  cpf               String    @unique
  fk_address        Int?
  contact           String?
  gender            String?
  emergency_contact String?
  region            String    @default("BR")
  address           Address?  @relation(fields: [fk_address], references: [id_address])
  posts             Post[]
  updatedAt         DateTime  @default(now()) @updatedAt()
  createdAt         DateTime  @default(now())

  @@map("common_user")
}

// inicialmente dessa forma
model Post {
  id_post   String     @id @default(cuid())
  id_user   String
  user      CommonUser @relation(fields: [id_user], references: [id_user])
  title     String
  content   String
  videos    String[]
  images    String[]
  region    String @default("BR")
  comments  Coment[]
  updatedAt DateTime   @updatedAt @default(now())
  createdAt DateTime   @default(now())
}

model Coment {
  id_comment String   @id @default(cuid())
  id_post    String
  post       Post     @relation(fields: [id_post], references: [id_post])
  content    String
  updatedAt  DateTime @updatedAt @default(now())
  createdAt  DateTime @default(now())
}

//

model Address {
  id_address Int     @id
  street     String?
  number     Int?
  cep        String?
  state      String?
  city       String?

  users CommonUser[]

  @@map("address")
}
